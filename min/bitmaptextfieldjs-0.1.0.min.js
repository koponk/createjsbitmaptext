(function(e){BitmapChar=function(a,b,k,h,j){this.mTexture=b;this.mCharId=a;this.mXOffset=k;this.mYOffset=h;this.mXAdvance=j;this.mKernings=null};BitmapChar.prototype.addKerning=function(a,b){null==this.mKernings&&(this.mKernings=[]);this.mKernings[a]=b};BitmapChar.prototype.getKerning=function(a){return null==this.mKernings||null==this.mKernings[a]||void 0==this.mKernings[a]?0:this.mKernings[a]};BitmapChar.prototype.createImage=function(){return this.mTexture.clone()};BitmapChar.prototype.getCharId=
function(){return this.mCharId};BitmapChar.prototype.getXOffset=function(){return this.mXOffset};BitmapChar.prototype.getYOffset=function(){return this.mYOffset};BitmapChar.prototype.getXAdvance=function(){return this.mXAdvance};BitmapChar.prototype.getTexture=function(){return this.mTexture};BitmapChar.prototype.getWidth=function(){return this.mTexture.spriteSheet.getFrame(this.mTexture.currentFrame).rect.width};BitmapChar.prototype.getHeight=function(){return this.mTexture.spriteSheet.getFrame(this.mTexture.currentFrame).rect.height};
e.BitmapChar=BitmapChar})(window);
(function(e){BitmapFont=function(a,b,k){this.mName="unknown";this.mLineHeight=this.mSize=this.mBaseLine=k;this.mTexture=a;this.mChars=[];this.mHelperImage=new createjs.Bitmap(a);this.mCharLocationPool=[];b&&this.parseFontXml(b);this.textHeight=this.textWidth=0;this.previousWidth=[]};BitmapFont.NATIVE_SIZE=-1;BitmapFont.MINI="mini";BitmapFont.CHAR_SPACE=32;BitmapFont.CHAR_TAB=9;BitmapFont.CHAR_NEWLINE=10;BitmapFont.CHAR_CARRIAGE_RETURN=13;BitmapFont.prototype.parseFontXml=function(a){for(var b=a.childNodes[0].getElementsByTagName("chars")[0].getElementsByTagName("char"),
k=[],h={},j=[],f=[],d=0;d<b.length;d++){var c={};c.id=b[d].getAttribute("id");b[d].getAttribute("id");c.x=b[d].getAttribute("x");c.y=b[d].getAttribute("y");c.xAdvance=b[d].getAttribute("xadvance");c.xOffset=b[d].getAttribute("xoffset");c.yOffset=b[d].getAttribute("yoffset");c.width=b[d].getAttribute("width");c.height=b[d].getAttribute("height");k.push([c.x,c.y,c.width,c.height]);h["frame"+d]=[d];j.push(c)}spriteSheet=new createjs.SpriteSheet({images:[this.mTexture],frames:k,animations:h});for(c=0;c<
j.length;c++)b=new createjs.BitmapAnimation(spriteSheet),b.gotoAndStop(c),b.x=800*Math.random(),b.y=100,b=new BitmapChar(j[c].id,b,j[c].xOffset,j[c].yOffset,j[c].xAdvance),this.addChar(j[c].id,b);if(null!=a.childNodes[0].getElementsByTagName("kernings")[0]){a=a.childNodes[0].getElementsByTagName("kernings")[0].getElementsByTagName("kerning");for(j=0;j<a.length;j++)c={},c.first=a[j].getAttribute("first"),c.second=a[j].getAttribute("second"),c.amount=a[j].getAttribute("amount"),f.push(c),c.second in
this.mChars&&this.getChar(c.second).addKerning(c.first,c.amount)}};BitmapFont.prototype.getChar=function(a){return this.mChars[a]};BitmapFont.prototype.addChar=function(a,b){this.mChars[a]=b};BitmapFont.prototype.createSprite=function(a,b,k,h,j,f,d,c,e,l){null==h&&(h=-1);null==d&&(d="center");null==c&&(c="center");null==e&&(e=!0);null==l&&(l=!0);a=this.arrangeChars(a,b,k,h,d,c,e,l,f);b=a.length;k=new createjs.Container;for(h=0;h<b;h++)f=a[h],d=f._char.createImage(),d.x=f.x+h*j,d.y=f.y,d.scaleX=d.scaleY=
f.scale,k.addChild(d),f=f._char.getHeight()*f.scale,f>this.textHeight&&(this.textHeight=f);return k};BitmapFont.prototype.arrangeChars=function(a,b,k,h,j,f,d,c,e){null==h&&(h=-1);null==j&&(j="center");null==f&&(f="center");null==d&&(d=!0);null==c&&(c=!0);if(null==k||0==k.length)return[];0>h&&(h*=-this.mSize);for(var l=[[]],x=!1,g={},p=0,y=0,n=0,u=0;!x;){u=h/this.mSize;y=a/u;n=b/u;l=[];l.push([]);if(this.mLineHeight<=n)for(var w=-1,z=-1,v=0,q=0,r=[],p=k.length,m=0;m<p;++m){var A=!1,t=k.charCodeAt(m),
s=this.getChar(t);if(t==BitmapFont.CHAR_NEWLINE||t==BitmapFont.CHAR_CARRIAGE_RETURN)A=!0;else if(null==s)console.log("[BitmapFont] Missing character: "+t);else{if(t==BitmapFont.CHAR_SPACE||t==BitmapFont.CHAR_TAB)w=m;c&&(v=s.getKerning(z)/1+v/1);g=new CharLocation(s);g._char=s;g.x=v/1+s.getXOffset()/1;g.y=q/1+s.getYOffset()/1;r.push(g);v+=s.getXAdvance()/1;z=t;if(g.x+Number(s.getWidth())>y){g=-1==w?1:m-w;r.splice(r.length-g,g);if(0==r.length)break;m-=g;A=!0}}if(m==p-1)l.push(r),x=!0;else if(A)if(l.push(r),
w==m&&r.pop(),q+2*this.mLineHeight<=n)r=[],v=0,q+=this.mLineHeight,z=w=-1;else break}d&&!x?(h-=1,l.length=0):x=!0}a=[];m=l.length;p=q+this.mLineHeight;q=0;f==VAlign.BOTTOM?q=n-p:f==VAlign.CENTER&&(q=(n-p)/2);this.previousWidth=[];for(f=0;f<m;++f)if(n=l[f],p=n.length,0!=p){b=0;g=n[n.length-1];g=g.x-g._char.getXOffset()/1+g._char.getXAdvance()/1;j==HAlign.RIGHT?b=y-g:j==HAlign.CENTER&&(b=(y-g)/2);for(k=this.width=0;k<p;++k)g=n[k],this.width+=g._char.getXAdvance()/1+g._char.getXOffset()/1+1,g.x=u*(g.x+
b),g.y=u*(g.y+q+(f-1)*e),g.scale=u,0<g._char.getWidth()&&0<g._char.getHeight()&&a.push(g),this.mCharLocationPool.push(g);this.previousWidth.push(this.width)}this.width=this.previousWidth[0];for(m=1;m<this.previousWidth.length;m++)this.previousWidth[m]>this.width&&(this.width=this.previousWidth[m]);return a};BitmapFont.prototype.getName=function(){return this.mName};BitmapFont.prototype.getSize=function(){return this.mSize};BitmapFont.prototype.getLineHeight=function(){return this.mLineHeight};BitmapFont.prototype.setLineHeight=
function(a){this.mLineHeight=a};BitmapFont.prototype.getBaseLine=function(){return this.mBaseLine};BitmapFont.prototype.getWidth=function(){return this.width};BitmapFont.prototype.getHeight=function(){return this.textHeight};e.BitmapFont=BitmapFont})(window);
(function(){BitmapTextField=function(a,b,k,h,j,f,d,c,e,l){this.font=null;null==f&&(f=1);null==d&&(d=1);null==c&&(c="center");null==e&&(e="center");null==l&&(l=!0);this.hAlign=c;this.vAlign=e;this.autoScale=l;this.initialize(a,b,k,h,j,f,d,c,e,l);this.containerWidth=a;this.containerHeight=b;this.fontSize=j;this.horizantalLetterSpacing=f;this.verticalLetterSpacing=d};BitmapTextField.bitmapFonts=[];var e=BitmapTextField.prototype=new createjs.Container;e.BitmapTextField_initialize=e.initialize;e.initialize=
function(a,b,e,h,j,f,d,c,B,l){e=String(e);this.BitmapTextField_initialize();this.border=new createjs.Shape;this.border.graphics.setStrokeStyle(1);this.border.graphics.beginStroke(createjs.Graphics.getRGB(255,0,0));this.border.graphics.drawRect(0,0,a,b);this.addChild(this.border);this.border.visible=!1;this.textContainer=new createjs.Container;this.addChild(this.textContainer);BitmapTextField.bitmapFonts[h]?(this.font=BitmapTextField.bitmapFonts[h],a=this.font.createSprite(a,b,e,j,f,d,c,B,l,!0),this.actualWidth=
this.font.getWidth(),this.textContainer.addChild(a)):console.log("BitmapTextField: Font is not registered "+h)};e.setText=function(a){a=String(a);this.textContainer.removeAllChildren();a=this.font.createSprite(this.containerWidth,this.containerHeight,a,this.fontSize,this.horizantalLetterSpacing,this.verticalLetterSpacing,this.hAlign,this.vAlign,this.autoScale,!0);this.textContainer.addChild(a);this.actualWidth=this.font.getWidth()};e.getWidth=function(){return this.containerWidth};e.getHeight=function(){return this.containerHeight};
e.getActualWidth=function(){return this.actualWidth};e.showBorder=function(a){null==a&&(a=!0);this.border.visible=a};BitmapTextField.registerBitmapFont=function(a,b){if(null==BitmapTextField.bitmapFonts[b])return BitmapTextField.bitmapFonts[b]=a,b;console.log(b+" : is already registered")}})(window);(function(e){CharLocation=function(a){this._char=a;this._char=null;this.y=this.x=this.scale=0};e.CharLocation=CharLocation})(window);
(function(e){HAlign=function(){};HAlign.CENTER="center";HAlign.LEFT="left";HAlign.RIGHT="right";e.HAlign=HAlign})(window);(function(e){VAlign=function(){};VAlign.BOTTOM="bottom";VAlign.TOP="top";VAlign.CENTER="center";e.VAlign=VAlign})(window);